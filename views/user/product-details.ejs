<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Shop the best products at Royal Hub. High-quality items with amazing deals.">
    <meta name="keywords" content="Male_Fashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <meta name="description" content="Male_Fashion Template"> -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Royal hub products</title>


    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
    rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<style>
    .header__logo{
    width: 100px;
    height: 100px;
    position: relative;
    top: -30px;
    
}

.product__details__pic__item{
    height: 55rem;
    width: 30rem;
}
.product__details__pic{
    height: 35rem;
    background-color: white;
    
}

/* .imagefit{
    
  width: 100%; 
  height: 300px;
  object-fit: contain;
}
.addbut{
    background-color: black;
    color: white;
    text-transform: uppercase;
      font-size: 14px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 600;
      transition: background-color 0.3s, transform 0.3s;
      width: 150px;
      height: 50px;
}
.wishlist-btn{
    background-color: black;
    color: white;
    text-transform: uppercase;
      font-size: 14px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 600;
      transition: background-color 0.3s, transform 0.3s;
      width: 150px;
      height: 50px;
} */
/* Enhance button UI */
.addbut, .wishlist-btn {
    background-color: #000; /* Black color for uniformity */
    color: #fff;
    text-transform: uppercase;
    font-size: 16px; /* Slightly larger for better readability */
    border-radius: 4px;
    text-decoration: none;
    font-weight: 600;
    width: 100%; /* Full width on smaller screens */
    padding: 12px 0; /* Ensure enough height for the button */
    transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
    text-align: center; /* Center the text */
    margin-bottom: 15px; /* Space between buttons */
    cursor: pointer;
    display: inline-block;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Light shadow for depth */
}

/* Hover state with slight scaling */
.addbut:hover, .wishlist-btn:hover {
    background-color: #444;
    transform: translateY(-4px); /* More noticeable hover effect */
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2); /* Stronger shadow on hover */
}

/* Active state with a subtle press effect */
.addbut:active, .wishlist-btn:active {
    background-color: #222;
    transform: translateY(2px); /* Button presses down on click */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Lighter shadow on active */
}

/* Make buttons more flexible on larger screens */
@media (min-width: 768px) {
    .addbut, .wishlist-btn {
        width: auto; /* Let the buttons shrink to fit content on larger screens */
        max-width: 350px; /* Set a maximum width */
        padding: 14px 25px; /* More padding for larger screens */
        font-size: 18px; /* Larger font on bigger screens */
    }
}

/* On small screens, adjust padding and font size */
@media (max-width: 576px) {
    .addbut, .wishlist-btn {
        padding: 14px 0; /* More vertical padding */
        font-size: 14px; /* Smaller text size on mobile */
    }
}



.pro-qty input {
    width: 60px; 
    height: 40px;
    font-size: 16px;
    text-align: center;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-right: 10px;
}

.pro-qty input:focus {
    outline: none;
    border-color: #000; 
}


.imagefit {
    width: 100%; 
    height: auto;
    object-fit: contain; 
}

</style>

<body>
   
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="header__logo">
                        <a href="/"><img loading="lazy" src="/img/royalwhitelogo.jpeg" alt="Royalhub-logo"></a>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <nav class="header__menu mobile-menu">
                        <ul>
                            <li><a href="/">Home</a></li>
                            <li class="active"><a href="/shop">Shop</a></li>
                            <!-- <li><a href="#">Pages</a>
                                <ul class="dropdown">
                                    <li><a href="./about.html">About Us</a></li>
                                    <li><a href="./shop-details.html">Shop Details</a></li>
                                    <li><a href="./shopping-cart.html">Shopping Cart</a></li>
                                    <li><a href="./checkout.html">Check Out</a></li>
                                    <li><a href="./blog-details.html">Blog Details</a></li>
                                </ul>
                            </li>
                            <li><a href="./blog.html">Blog</a></li>
                            <li><a href="/contact.html">Contacts</a></li> -->
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3 col-md-3">
                    <div class="header__nav__option">
                        <a href="#" class="search-switch"><img loading="lazy" src="/img/icon/search.png" alt="search-icon"></a>
                        <a href="/whishlist"><img loading="lazy" src="/img/icon/heart.png" alt="whishlist-icon"></a>
                        <a href="/cart"><img loading="lazy" src="/img/icon/cart.png" alt="cart-icon"> <span>0</span></a>
                        <!-- <div class="price">$0.00</div> -->
                    </div>
                </div>
            </div>
            <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
    </header>
    <!-- Header Section End -->

    <!-- Shop Details Section Begin -->
    <section class="shop-details">
        <div class="product__details__pic">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product__details__breadcrumb">
                            <a href="/">Home</a>
                            <a href="/shop">Shop</a>
                            <span>Product Details</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3 col-md-3">
                        <ul class="nav nav-tabs" role="tablist">
                          <li class="nav-item">
                                <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab">
                                    <div class="product__thumb__pic set-bg" data-setbg="/uploads/re-image/<%=proData.productImage[0]%>">
                                    </div>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tabs-2" role="tab">
                                    <div class="product__thumb__pic set-bg" data-setbg="/uploads/re-image/<%=proData.productImage[1]%>">
                                    </div>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="tab" href="#tabs-3" role="tab">
                                    <div class="product__thumb__pic set-bg" data-setbg="/uploads/re-image/<%=proData.productImage[2]%>">
                                    </div>
                                </a>
                            </li>
                            
                        </ul>
                    </div>
                    <div class="col-lg-6 col-md-9">
                        <div class="tab-content">
                            <div class="tab-pane active" id="tabs-1" role="tabpanel">
                                <div class="product__details__pic__item">
                                    <img loading="lazy" id="magnifyImg1" class="imagefit" src="/uploads/re-image/<%=proData.productImage[0]%>" alt="Image of <%= proData.productName %>">
                                </div>
                            </div>
                            <div class="tab-pane" id="tabs-2" role="tabpanel">
                                <div class="product__details__pic__item">
                                    <img loading="lazy" id="magnifyImg2" class="zoom-image" src="/uploads/re-image/<%=proData.productImage[1]%>" alt="Image of <%= proData.productName %>">
                                </div>
                            </div>
                            <div class="tab-pane" id="tabs-3" role="tabpanel">
                                <div class="product__details__pic__item">
                                    <img loading="lazy" id="magnifyImg3" src="/uploads/re-image/<%=proData.productImage[2]%>" alt="Image of <%= proData.productName %>">
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="product__details__content">
            <div class="container">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-8">
                        <div class="product__details__text">
                            <a href="/product/<%= proData.slug %>">
                                <h3><%= proData.productName %></h3>
                            </a>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star-o"></i>
                                <span> - 5 Reviews</span>
                            </div>
                            <h3> $<%=proData.salePrice%><span><%=proData.productOffer%></span></h3>
                            <p><%=proData.description%>.</p>

                            <button
                  class="btn wishlist-btn"
                  data-product-id="<%= proData._id %>"
                  onclick="toggleWishlist('<%= proData._id %>')"
                >
                  Add to Wishlist
                </button>

                            <h6 class="quantity  my-3" ><%= proData.stock==0?'Sold out':'Only '+proData.stock+' left'%></h6>
                            
                            <div class="product__details__cart__option">
                                <% if (proData.stock > 0) { %>
                                    
                                    <div class="quantity">
                                        <div class="pro-qty">
                                            <input 
                                            type="number" 
                                            value="1" 
                                            name="visibleQuantity" 
                                            min="1" 
                                            max="<%= proData.stock %>" 
                                            id="visibleQuantityInput" 
                                            oninput="updateHiddenQuantity(this)">
                                        </div>
                                    </div>
                                    <form action="/addToCart" method="post" class="add-to-cart-form" id="addToCartForm">
                                        <input type="hidden" name="productId" value="<%= proData._id %>">
                                        <input type="hidden" name="quantity" value="1" id="hiddenQuantityInput">
                                        <button class="addbut" type="submit" id="addToCartButton">Add To Cart</button>
                                    </form>
                                <% } else { %>
                            
                                    <p style="color: red;">This product is out of stock!</p>
                                    <button class="addbut" type="button" disabled style="background-color: grey; cursor: not-allowed;">
                                        Add To Cart
                                    </button>
                                <% } %>
                           
                        </div>
                    </div>
                </div>
                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer Section Begin -->
    <%- include("../../views/partials/user/footer") %>
    <!-- Footer Section End -->

    <!-- Search Begin -->
    <div class="search-model">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch">+</div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="Search here.....">
            </form>
        </div>
    </div>
    <!-- Search End -->
    
   
    

    <!-- Js Plugins -->
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.nice-select.min.js"></script>
    <script src="/js/jquery.nicescroll.min.js"></script>
    <script src="/js/jquery.magnific-popup.min.js"></script>
    <script src="/js/jquery.countdown.min.js"></script>
    <script src="/js/jquery.slicknav.js"></script>
    <script src="/js/mixitup.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- extm.min.js -->
    <script src="/hover-extended-magnify/extm.min.js"></script>
    
   



   <script>











function updateHiddenQuantity(input) {
  const visibleQuantity = parseInt(input.value, 10);
  const maxStock = parseInt(input.max, 10);

  if (visibleQuantity > maxStock) {
    Swal.fire({
      icon: 'warning',
      title: 'Exceeded Stock Limit',
      text: `Only ${maxStock} items are available in stock.`,
      toast:true,
      confirmButtonText: 'Okay',
      confirmButtonColor: '#4CAF50',
    }).then(() => {
      input.value = maxStock; 
    });
  } else if (visibleQuantity < 1) {
    input.value = 1;
  }
  document.getElementById('hiddenQuantityInput').value = input.value;
}






    $(document).ready(function() {
       
        $('#magnifyImg1').extm({
            zoomLevel: 2,
            squareOverlay: true,
            position: 'right',
            rightPad: 10,
            loadingText: 'Loading...',
            lazy: true
        });
        
        $('#magnifyImg2').extm({
            zoomLevel: 2,
            squareOverlay: true,
            position: 'right',
            rightPad: 10,
            loadingText: 'Loading...',
            lazy: true
        });
        
        $('#magnifyImg3').extm({
            zoomLevel: 2,
            squareOverlay: true,
            position: 'right',
            rightPad: 10,
            loadingText: 'Loading...',
            lazy: true
        });
    });


    document.addEventListener('DOMContentLoaded', function () {
        const addToCartForms = document.querySelectorAll('.add-to-cart-form');
        
        addToCartForms.forEach(form => {
            form.addEventListener('submit', function (event) {
                event.preventDefault(); 
                fetch(form.action, {
                    method: 'POST',
                    body: new URLSearchParams(new FormData(form)),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    }
                })
                .then(response => response.json())
                .then(data => {

                    Swal.fire({
                        title: 'Product added to cart!',
                        text: 'Would you like to go to the cart or continue shopping?',
                        icon: 'success',
                        toast:true,
                        showCancelButton: true,
                        confirmButtonText: 'Go to Cart',
                        cancelButtonText: 'Continue Shopping'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = "/cart";
                        }
                    });
                })
                .catch (error=> {
    Swal.fire({
        // toast:true,
      icon: 'error',
      title: 'Error',
      text: 'Please try again with Login.',
      confirmButtonText: 'OK',
    });
  })
            });
        });
    });



    function toggleWishlist(productId) {
  fetch(`/addToWhishlist`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ productId }),
  })
  
    .then(response => {
      if (response.ok) {
        
        Swal.fire({
          icon: 'success',
          title: 'Added to Wishlist!',
          text: 'The product has been successfully added to your wishlist.',
          showConfirmButton: true,
          
        }).then(() => {
          location.reload(); 
        });
      } else {
        Swal.fire({
          icon: 'warning',
          title: 'Warning',
          text: 'The product is already in Wishlist',
          showConfirmButton: true,
        });
      }
    })
    .catch(error => {
      console.error('Error:', error);
    });
}

</script>


</body>

</html>